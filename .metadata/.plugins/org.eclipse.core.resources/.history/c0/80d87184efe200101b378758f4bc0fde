/*
 * task_health.c
 *
 *  Created on: Dec 26, 2025
 *      Author: sande
 */
/* application/rtos/tasks_health.c */

#include "FreeRTOS.h"
#include "task.h"
#include "uart_driver.h"
#include "gpio_driver.h"
#include "stdio.h"
#include "tasks_common.h"
#include "uart_threadsafe.h"

void HealthMonitor_Task(void *p)
{
	  uprintf("[HEALTH] alive\r\n");

    while(1)
       {
           vTaskDelay(pdMS_TO_TICKS(1000));   // 1 Hz

       //    uptime_sec++;

           if(hb_cli == 0 || hb_sensor == 0 || hb_adc == 0 || hb_oled == 0)
           {
               uprintf("[HEALTH] Warning: Some task not alive\n");
           }

           hb_cli = hb_sensor = hb_adc = hb_oled = 0;   // reset heartbeat
       }

}


